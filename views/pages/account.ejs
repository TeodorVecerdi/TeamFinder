<!DOCTYPE html>
<html lang="en">

  <head>
    <% include ../partials/head %>
    <style type="text/css">
      .jumbotron{
        box-shadow: 2px 8px 16px -8px black;
        padding: 1%;
      }
      .btn{
        background-color: #343a40; 
        border-color: #343a40; 
        color: #00e500;
      }
      .btn:hover{
        background-color: #343a40; 
        border-color: #00e500; 
        color: #00e500;
      }
    </style>
  </head>

  <body>
    <% include ../partials/header %>

    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-left">
          <div class="jumbotron">
            <h3><b><%= email %></b></h3>
            <hr class="my-4">
            <h4>Notifications:</h4>
            <hr class="my-4">

            <% for(i in notifications){ %>
            <% if(notifications[i].vis==="false"){ %>
            <div style="align-content: inline;">
              <h4><a href="" class="btn" id="accept<%= notifications[i].id %>">Accept</a> <a href="" class="btn" id="refuse<%= notifications[i].id %>" >Refuse</a> User <b><%= notifications[i].user %></b> wants to join <%= notifications[i].type %> : <%= notifications[i].name %></h4>
            </div>
            <% }} %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12 text-left">
          <div class="jumbotron">
            <h4><b>Your Projects:</b></h4>
          </div>
        </div>
      </div>
      <% for(i in projects){ %>
       <div class="row">
        <div class="col-lg-12 text-left">
          <div class="jumbotron">
            <h4 class="display-6"><b><%= projects[i].NAME %></b></h4>
            <hr class="my-4">
            <h5><%= projects[i].SUMMARY %></h5>
            <p class="lead">
              <a class="btn btn-lg" href="/projects/<%= projects[i].NAME %>" role="button">Learn more</a>
            </p>
          </div>
        </div>
      </div>
      <% } %>
      <div class="row">
        <div class="col-lg-12 text-left">
          <div class="jumbotron">
            <h4><b>Your Teams:</b></h4>
          </div>
        </div>
      </div>
      <% for(i in teams){ %>
       <div class="row">
        <div class="col-lg-12 text-left">
          <div class="jumbotron">
            <h4 class="display-6"><b><%= teams[i].NAME %></b></h4>
            <hr class="my-4">
            <h5><%= teams[i].SUMMARY %></h5>
            <p class="lead">
              <a class="btn btn-lg" href="/teams/<%= teams[i].NAME %>" role="button">Learn more</a>
            </p>
          </div>
        </div>
      </div>
      <% } %>
    </div>

    <% include ../partials/footer %>
    <% include ../partials/socket-notification.ejs %>
    <script>
        var socket = io.connect();
        <% for(i in notifications){ %>
          <% if(notifications[i].vis==="false"){ %>
          $('#accept<%= notifications[i].id %>').on('click', function(){
            socket.emit('answer request', {status:'accept', id:'<%= notifications[i].id %>', type:'<%= notifications[i].type %>', name:'<%= notifications[i].name %>', requester:'<%= notifications[i].user %>', leader:$.cookie('username')});
          });
          $('#refuse<%= notifications[i].id %>').on('click', function(){
            socket.emit('answer request', {status:'refuse', id:'<%= notifications[i].id %>', type:'<%= notifications[i].type %>', name:'<%= notifications[i].name %>', requester:'<%= notifications[i].user %>', leader:$.cookie('username')});
          });
        <% }} %>
    </script>

  </body>

</html>
